#### 链接
https://www.educoder.net/tasks/58935/1247007/6yqapfl4zif7?coursesId=58935

# 类与对象

## 类的定义
- 1、类定义的基本格式  
```cpp
class 类名{
访问权限:
    成员列表;
}; 
```
- 2、类中的成员包括数据成员和函数成员，成员的说明和定义的方法与前面学过的变量、数组或函数等的说明和定义的方法类似，但数据成员不能初始化（赋初值）。  
类的定义  
示例如下所示
```cpp
class Myclass{
protected:
    int n;    // A
public:
    float m;
    int get( )
    {
        return n; 
    }
    void set(int,int);
};
```
>上例中定义了一个类Myclass,包括数据成员m和n，以及函数成员get。如把A行改为int n=0;，则是一个语法错误，错误的原因是数据成员不能初始化。  

## 对象的定义和使用
1、类是一种数据类型，对象是类类型的变量；定义对象的方法和以前学过的定义变量的方法相似，其基本格式如下所示。
>类名 对象名;

2、对象是一种构造类型的数据，像其他构造类型的数据（如数组）一样，通常（同类型对象赋值除外）只能使用类的成员，而不能将对象作为一个整体使用。  
对象的定义和使用示例如下所示。  
```cpp
Myclass t;
cout<<t.m;
cout<<t.get();
```
>上例中定义了类Myclass类型的对象t，并输出对象t的数据成员m和n，其中t.get()的值等于t.n。而如下的语句是语法错误，错误的原因是不能将对象作为整体使用。  
cout<<t;

## 成员的访问权限和访问方式  
类中说明成员中，可用private、protected或public指定成员的访问权限。  
- 1、私有成员（private）：只能在自身类中直接访问，在类外要通过公有成员间接使用（派生类中也可以通过保护成员间接访问）；private为类的默认访问权限，即类中成员没有指定访问权限时，为私有成员。  
- 2、保护成员（protected）：可以在自身类和派生类中直接访问，在类外（类的对象）访问要通过公有成员间接使用。  
- 3、公有成员（public）：可以在任何地方直接访问。  
> 上例中，因为对象t的数据成员m是公有的。所以可以直接访问，如"cout<< t.m;"。而对象t的数据成员n是保护的，所以语句"cout<< t.n";是错误的，错误的原因是类外不能直接访问私有或保护成员；应该通过对象t的公有成员get间接访问对象t的私有或保护成员n，如下所示。
cout<< t.get(); 

## 使用类的数据成员
- 1、类的数据成员在类中应该直接使用，如上例get函数中的"return n;"。  
- 2、类的数据成员在类外应该通过对象使用，如上例中的cout<< t.m;。  
- 3、如上所述，使用类的成员时还应注意成员的访问权限和访问方式  

## 类的作用域和this指针  
- 1、类作用域  
在类中可以直接使用类的成员，而在类外需要通过对象使用使用类的成员，是因为类的成员具有类的作用域，即类的成员在类中处处可见，而在类外是看不到的。  
另一方面，对象具有类的属性，即类有什么成员，对象也有什么成员；但对象一定是定义在该类的类外的，其使用属于类外访问成员。  
- 2、this指针  
类的非静态成员函数中指向当前对象的系统指针，通常隐含使用。
（1）函数中直接使用成员，实际是使用`this`指针所指的成员，即不别写出this指针。  
this指针使用示例如下所示。  
```cpp
void Myclass::set(int x,int y)
{
    m=x;        // A行
    n=y;        // B行
}
```

>上例中，A行等同于this->m=x;，B行等同于this->n=y;。但当set函数形参的名称与成员相同时，则类中就有2个m和2个n，且参数的作用域是类中的块作用域；根据作用域局部优先的原则，函数体中将把形参赋值给形参，而不能把形参赋值给成员。此时，可以通过this指针区分成员和形参，如下所示。  
```cpp
void Myclass::set(int m,int m)
{
    this->m=m;        // 赋值运算符左边的是成员，右边的是参数
    this->n=n;        // 赋值运算符左边的是成员，右边的是参数
}
```
（2）哪个对象调用非静态成员函数，则this指针就指向哪个对象调用。  
当前对象使用示例如下所示。  
```cpp
Myclass t1,t2;
t1.set(1,2);        // A行
t2.set(3,4);        // B行
```
>上例中，执行A行时，调用set函数的对象是t1，则this指针指向t1；执行B行时，调用set函数的对象是t2，则this指针指向t2。

## 成员函数的定义
通常类的数据成员是私有的，成员函数是公有的，用于类外通过公有的成员函数访问私有的数据成员。  
- 1、成员函数既可以在类中直接定义，也可以在类中说明、类外定义。  
类的成员函数说明和定义示例如下所示。
```cpp
class {
protected:
    int n;
public:
    void set(int m){ n=m; }
    void print( )const;
};
void Myclass::print( )const
{
    cout<<n<<endl;
}
```
类中直接定义的成员函数具有内联特性，而类中说明、类外定义的成员函数不具有内联特性。  
- 2、成员函数说明和定义注意事项  
（1）成员函数在类外定义时，函数名称的前面要用类名和作用域运算符用以说明所定义的函数是类的成员函数，如下print的定义是错误的。  
```cpp
void print( )const
{
    cout<<n<<endl;
}
```
（2）所定义的成员函数与说明的成员函数必须一致，即函数类型、函数名称、函数形参的个数和类型（参数名称除外）必须相同，如下print的定义也是错误的。  
```cpp
void Myclass::print( )
{
    cout<<n<<endl;
}
```
const用于说明成员函数是常成员（以后介绍），可以看成是函数名称的一部分，上述定义的函数与类中说明的函数不一致。  
（3）除纯虚函数外（以后介绍），类中说明的成员函数在类外一定要有定义；反之，在类外定义的成员函数，在类中一定要有说明。  
（4）成员函数和普通函数的非成员函数相似，既可以设置参数的缺省值（运算符重载函数除外），也可以函数重载；使用方法也相似。  

## 成员函数的调用  
- 1、类的成员函数调用与类的数据成员使用相似，类中直接调用，类外通过对象的调用。
- 2、类外调用成员函数时，要受到访问权限的限制，即通常只能直接调用公有成员函数。
- 3、与普通的非成员函数调用相似，成员函数调用时，也要遵循函数调用的基本原则。
  - （1）通常有值型函数的调用表达式应该参与输出等运算，而无值型函数的调用语句必须是独立的调用语句；
  - （2）调用成员函数时，实参必须与形参一致；
  - （3）调用有缺省值参数的成员函数时，如果提供了实参则以提供的实参调用函数，如果没有提供实参则以缺省值调用函数，

## 类成员的说明
>1、类数据成员的说明格式如下：  
数据类型 数据成员名称;   
2、类中成员函数的说明格式如下：  
函数类型 函数名称(形参列表);   
示例如下：  
```cpp
class Myclass{
    int m,n;
public:
    void func(int,int);
};
成员函数类外定义
类外成员函数的定义格式如下：
函数类型 类名::函数名称(形参列表)
{
    ...;    // 函数体略
}
```
示例如下：  
```cpp
void Myclass::func(int x,int y)
{
    m=x,n=y;
}
```
## 成员函数的调用
类外调用成员函数时，必须通过对象调用，且成员函数的形参和实参一致，满足有值型函数和无值型函数调用的要求，满足类的访问权限的要求，其基本格式如下所示。  
>对象名称.成员函数名称（实参列表）；



